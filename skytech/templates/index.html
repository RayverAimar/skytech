<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>SkyTech Browser</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        .header-image {
            position: absolute;
            width: 100%;
            height: auto;
            margin-bottom: 21%; 
            z-index:-1
        }
        .btn-corner {
            position: absolute;
            top: 20px; /* Cambiado el valor de top */
            right: 45px;
            margin: 10px;
        }
        .welcome-user-container {
            position: absolute;
            top: 0;
            right: 150px;
            margin: 10px;
            display: flex;
            align-items: center;
            color: #000000; /* Cambiado a negro */
            font-size: 18px;
        }
        .welcome-user-container p {
            margin-right: 10px;
        }
        .auth-buttons {
            position: absolute;
            top: 20px;
            right: 180px; /* Alineaci√≥n ajustada */
            display: flex;
            align-items: center;
        }
        .auth-buttons a {
            margin-right: 10px;
        }
        .notification-box {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-top: 20px; /* Espacio entre el search bar y el notification box */
        }
        .notification-box h3 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 20px;
            color: #333;
        }
        .notification-box ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        .notification-box li {
            margin-bottom: 5px;
            color: #555;
        }
        .notification-box li a {
            font-weight: bold;
            color: #007bff;
        }
        .notification-box li strong {
            font-weight: bold;
        }
    </style>
</head>

<img src="{{ url_for('static', filename='img/header.png') }}" alt="Sky Image" class="header-image"/>

<body class=" d-flex align-items-center" style="height: 100vh">

    {% if user %}
        <div class="welcome-user-container">
            <p>Welcome, {{ user.username }}!</p>
            <a href="{{ url_for('logout') }}" class="btn btn-dark btn-corner rounded-pill px-4" type="button">Logout</a>
        </div>
        <div>
            <a href="{{ url_for('profile', user_id=user.id) }}" class="btn btn-dark btn-corner rounded-pill px-4" type="button">Profile</a>
        </div>
    {% else %}
        <div class="auth-buttons">
            <a href="{{ url_for('login') }}" class="btn btn-dark rounded-pill px-4" type="button">Log in</a>
            <a href="{{ url_for('signup') }}" class="btn btn-dark rounded-pill px-4" type="button">Sign up</a>
        </div>
    {% endif %}

    <div class="container" style="margin-top: -120px">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <header class="text-center my-5 animate__animated animate__fadeInDown">
                    <h1 class="display-1">SkyTech</h1>
                    <p class="lead animate__animated animate__fadeIn">Your Gateway to the Skies</p>
                </header>
                
                <form action="{{ url_for('index') }}" method="post" class="form-group animate__animated animate__fadeIn">
                    <div class="input-group input-group-lg mb-3">
                        <input type="text" name="search" id="search" class="form-control rounded-pill" placeholder="Search the air..." aria-label="Search the air...">
                        <div class="input-group-append">
                            <button type="submit" class="btn btn-primary rounded-pill px-4" style="margin-left: 17px; animate__animated animate__fadeIn">Search</button>
                        </div>
                    </div>
                </form>
                {% if user and user.searches and random.randint(1,2) == 1%}
                    <div class="notification-box">
                        <h3>Flight Notifications</h3>
                        <ul>
                            {% for search in user.searches %}
                                {% if loop.index == 1 or random.randint(1, 4) == 1 %}
                                    {% set google_search_url = "https://www.google.com/search?q=flights+from+" ~ search.origin ~ "+to+" ~ search.destination %}
                                    {% set sentences = [
                                        "Don't miss out on our limited-time offer! Book your flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> now and save big!",
                                        "Planning your next adventure? Check out our discounted fares for flights between <strong>" ~ search.origin ~ "</strong> and <strong>" ~ search.destination ~ "</strong>! Book today and start packing!",
                                        "Ready to explore? Discover amazing deals on flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong>! Reserve your seats now and embark on a journey of discovery!",
                                        "Unlock new destinations! Book your flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> and let the adventure begin! Don't wait, book now!",
                                        "Adventure is calling! Take advantage of our special fares for flights between <strong>" ~ search.origin ~ "</strong> and <strong>" ~ search.destination ~ "</strong>! Book now and make memories to last a lifetime!",
                                        "Dreaming of your next getaway? Look no further! Our flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> offer unbeatable value and unforgettable experiences!",
                                        "Start your journey with us! Experience the magic of travel with our flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong>! Book now and let the adventure begin!",
                                        "Explore the world with ease! Our flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> provide seamless connections and unforgettable experiences. Book your tickets now!",
                                        "Elevate your travel experience! Discover incredible destinations with our flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong>! Book today and create memories that last a lifetime!",
                                        "Adventure awaits! Book your flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> now and embark on an unforgettable journey filled with excitement and discovery!",
                                        "Discover new horizons! With our flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong>, the possibilities are endless. Book now and start exploring!",
                                        "Make every moment count! Book your flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> today and create memories that will last a lifetime!",
                                        "Escape to paradise! Our flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> offer the perfect opportunity to unwind and explore. Book now and experience the magic!",
                                        "Experience the world in style! Book your flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> and enjoy premium service and exclusive amenities. Don't miss out, book today!",
                                        "Travel with confidence! Our flights from <strong>" ~ search.origin ~ "</strong> to <strong>" ~ search.destination ~ "</strong> offer flexible booking options and enhanced safety measures. Book now and enjoy peace of mind!"
                                    ] %}
                                    {% set selected_sentence = random.choice(sentences) %}
                                    <li>{{ selected_sentence|safe }} <a href="{{ google_search_url }}">Click here for more information</a></li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}

            </div>
        </div>
    </div>

    <footer class="text-center fixed-bottom mb-3">
        <p>&copy; 2024 SkyTech - All rights reserved</p>
    </footer>
</body>
</html>
